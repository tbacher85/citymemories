<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cupertino Chronicles - Anniversary Celebration</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin=""/>
    <title>The Graveyard - SaaS Resurrection Marketplace</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Source+Sans+Pro:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* CSS Reset and Base Styles */
        :root {
            --color-dark: #1a1a2e;
            --color-darker: #16213e;
            --color-accent: #e94560;
            --color-secondary: #533483;
            --color-tomb-raider: #4cc9a4;
            --color-undertaker: #9c42f5;
            --color-light: #f0f0f0;
            --color-gray: #8a8a8a;
            --color-success: #4cc9a4;
            --color-warning: #ff9f43;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        
        body {
            font-family: 'Roboto', sans-serif;
            font-family: 'Source Sans Pro', sans-serif;
            background: linear-gradient(135deg, var(--color-darker) 0%, var(--color-dark) 100%);
            color: var(--color-light);
            line-height: 1.6;
            color: #333;
            background-color: #f9f9f9;
        }

        h1, h2, h3, h4 {
            font-family: 'Playfair Display', serif;
            font-weight: 700;
            color: #2c3e50;
        }

        a {
            text-decoration: none;
            color: #3498db;
            min-height: 100vh;
            padding-bottom: 2rem;
        }

        img {
            max-width: 100%;
            height: auto;
        }

        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            padding: 0 1.5rem;
        }

        .btn {
            display: inline-block;
            padding: 12px 24px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        
        header {
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            padding: 1.5rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .btn:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .btn-secondary {
            background-color: #95a5a6;
        
        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .btn-secondary:hover {
            background-color: #7f8c8d;
        
        .logo-icon {
            font-size: 2rem;
            color: var(--color-accent);
        }

        .btn-danger {
            background-color: #e74c3c;
        
        .logo-text {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            font-weight: 700;
        }

        .btn-danger:hover {
            background-color: #c0392b;
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 2rem;
            align-items: center;
        }

        .btn-success {
            background-color: #2ecc71;
        
        nav a {
            color: var(--color-light);
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s;
            position: relative;
        }

        .btn-success:hover {
            background-color: #27ae60;
        
        nav a:after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -5px;
            left: 0;
            background-color: var(--color-accent);
            transition: width 0.3s;
        }

        /* Header and Hero Section */
        header {
            background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), 
                        url('https://images.unsplash.com/photo-1582268611958-ebfd161ef9cf?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80') no-repeat center center/cover;
        
        nav a:hover:after {
            width: 100%;
        }
        
        nav a:hover {
            color: var(--color-accent);
        }
        
        .auth-buttons {
            display: flex;
            gap: 1rem;
        }
        
        .auth-button {
            padding: 0.5rem 1.5rem;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .signup-btn {
            background: var(--color-accent);
            color: white;
            border: 2px solid var(--color-accent);
        }
        
        .signup-btn:hover {
            background: transparent;
            color: var(--color-accent);
        }
        
        .login-btn {
            background: transparent;
            color: var(--color-light);
            border: 2px solid var(--color-secondary);
        }
        
        .login-btn:hover {
            background: var(--color-secondary);
            color: white;
            padding: 100px 0;
            text-align: center;
        }

        .hero-content {
        
        .user-role-badge {
            padding: 0.3rem 0.8rem;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .tomb-raider-badge {
            background: rgba(76, 201, 164, 0.2);
            color: var(--color-tomb-raider);
            border: 1px solid var(--color-tomb-raider);
        }
        
        .undertaker-badge {
            background: rgba(156, 66, 245, 0.2);
            color: var(--color-undertaker);
            border: 1px solid var(--color-undertaker);
        }
        
        .hero {
            text-align: center;
            padding: 4rem 0 3rem;
            max-width: 800px;
            margin: 0 auto;
        }

        .hero-content h1 {
            font-size: 3rem;
            margin-bottom: 20px;
        
        .hero h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3.5rem;
            margin-bottom: 1.5rem;
            background: linear-gradient(to right, #fff 0%, var(--color-accent) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .hero p {
            font-size: 1.2rem;
            color: var(--color-gray);
            margin-bottom: 2rem;
        }
        
        .cta-button {
            display: inline-block;
            background: var(--color-accent);
            color: white;
            padding: 0.8rem 2rem;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
            border: 2px solid var(--color-accent);
        }
        
        .cta-button:hover {
            background: transparent;
            color: var(--color-accent);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(233, 69, 96, 0.3);
        }
        
        .roles-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 4rem 0;
        }
        
        .role-card {
            background: linear-gradient(145deg, rgba(42, 42, 62, 0.8) 0%, rgba(35, 35, 55, 0.8) 100%);
            border-radius: 15px;
            padding: 2.5rem;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s;
        }

        .hero-content p {
            font-size: 1.2rem;
            margin-bottom: 30px;
        
        .role-card:hover {
            transform: translateY(-10px);
        }

        /* About Section */
        .about-section {
            padding: 60px 0;
            background-color: white;
        
        .tomb-raider-card {
            border-top: 5px solid var(--color-tomb-raider);
        }

        .about-section h2 {
            text-align: center;
            margin-bottom: 40px;
            font-size: 2.5rem;
        
        .undertaker-card {
            border-top: 5px solid var(--color-undertaker);
        }

        .about-content {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        
        .role-icon {
            font-size: 3rem;
            margin-bottom: 1.5rem;
        }

        /* Stories Grid */
        .stories-section {
            padding: 60px 0;
            background-color: #f1f1f1;
        
        .tomb-raider-icon {
            color: var(--color-tomb-raider);
        }

        .section-title {
            text-align: center;
            margin-bottom: 40px;
            font-size: 2.5rem;
        
        .undertaker-icon {
            color: var(--color-undertaker);
        }

        .stories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
        
        .role-title {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .story-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        
        .role-description {
            color: var(--color-gray);
            margin-bottom: 1.5rem;
        }

        .story-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        
        .role-button {
            display: inline-block;
            padding: 0.8rem 1.5rem;
            border-radius: 50px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .tomb-raider-button {
            background: var(--color-tomb-raider);
            color: var(--color-dark);
        }
        
        .tomb-raider-button:hover {
            background: transparent;
            color: var(--color-tomb-raider);
            border: 2px solid var(--color-tomb-raider);
        }
        
        .undertaker-button {
            background: var(--color-undertaker);
            color: white;
        }

        .story-card-img {
            height: 200px;
            background-color: #ddd;
            background-size: cover;
            background-position: center;
        
        .undertaker-button:hover {
            background: transparent;
            color: var(--color-undertaker);
            border: 2px solid var(--color-undertaker);
        }
        
        .search-section {
            background: rgba(255, 255, 255, 0.05);
            padding: 2rem;
            border-radius: 15px;
            margin: 2rem auto;
            max-width: 700px;
        }
        
        .search-box {
            display: flex;
            gap: 1rem;
        }

        .story-card-content {
            padding: 20px;
        
        .search-input {
            flex: 1;
            padding: 1rem 1.5rem;
            border: none;
            border-radius: 50px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
        }

        .story-card h3 {
            margin-bottom: 10px;
            font-size: 1.5rem;
        
        .search-input::placeholder {
            color: var(--color-gray);
        }

        .story-card p {
            margin-bottom: 15px;
            color: #666;
        
        .search-button {
            padding: 1rem 1.5rem;
            border: none;
            border-radius: 50px;
            background: var(--color-secondary);
            color: white;
            cursor: pointer;
            transition: background 0.3s;
        }

        .story-card .author {
            font-style: italic;
            color: #7f8c8d;
        
        .search-button:hover {
            background: var(--color-accent);
        }

        /* Map Section */
        .map-section {
            padding: 60px 0;
            background-color: white;
        
        .filters {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 1rem;
            justify-content: center;
        }

        #story-map {
            height: 500px;
            width: 100%;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
        
        .filter-button {
            padding: 0.5rem 1rem;
            border: 1px solid var(--color-secondary);
            border-radius: 50px;
            background: transparent;
            color: var(--color-light);
            cursor: pointer;
            transition: all 0.3s;
        }

        .map-container {
        
        .filter-button:hover, .filter-button.active {
            background: var(--color-secondary);
            border-color: var(--color-secondary);
        }
        
        .graveyard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 2rem;
            margin: 3rem 0;
        }
        
        .grave-card {
            background: linear-gradient(145deg, rgba(42, 42, 62, 0.8) 0%, rgba(35, 35, 55, 0.8) 100%);
            border-radius: 15px;
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .map-overlay {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: white;
            padding: 10px;
            border-radius: 4px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        
        .grave-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
        }

        /* Custom marker clusters */
        .marker-cluster-small {
            background-color: rgba(181, 226, 140, 0.6);
        
        .grave-card-header {
            padding: 1.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .marker-cluster-small div {
            background-color: rgba(110, 204, 57, 0.6);
        
        .grave-card-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: white;
        }

        .marker-cluster-medium {
            background-color: rgba(241, 211, 87, 0.6);
        
        .grave-card-meta {
            display: flex;
            justify-content: space-between;
            color: var(--color-gray);
            font-size: 0.9rem;
        }
        .marker-cluster-medium div {
            background-color: rgba(240, 194, 12, 0.6);
        
        .grave-card-body {
            padding: 1.5rem;
        }

        .marker-cluster-large {
            background-color: rgba(253, 156, 115, 0.6);
        
        .grave-card-description {
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }
        .marker-cluster-large div {
            background-color: rgba(241, 128, 23, 0.6);
        
        .grave-card-assets {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }
        
        .asset-tag {
            background: rgba(83, 52, 131, 0.3);
            padding: 0.3rem 0.8rem;
            border-radius: 50px;
            font-size: 0.8rem;
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
        }
        
        .grave-card-footer {
            padding: 1.5rem;
            background: rgba(0, 0, 0, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* Modals */
        
        .grave-price {
            font-weight: 600;
            font-size: 1.2rem;
            color: var(--color-success);
        }
        
        .price-badge {
            background: var(--color-warning);
            color: var(--color-dark);
            padding: 0.3rem 0.8rem;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .inquire-button {
            background: var(--color-accent);
            color: white;
            border: none;
            padding: 0.7rem 1.5rem;
            border-radius: 50px;
            cursor: pointer;
            transition: background 0.3s;
            font-weight: 600;
        }
        
        .inquire-button:hover {
            background: #ff5c77;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 1000;
            overflow-y: auto;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        
        .modal-content {
            background: white;
            margin: 50px auto;
            padding: 30px;
            border-radius: 8px;
            max-width: 800px;
            width: 90%;
            background: linear-gradient(135deg, var(--color-darker) 0%, var(--color-dark) 100%);
            border-radius: 15px;
            max-width: 600px;
            width: 100%;
            padding: 2.5rem;
            position: relative;
            animation: modalFadeIn 0.3s ease;
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            max-height: 90vh;
            overflow-y: auto;
        }

        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 24px;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            color: var(--color-gray);
            font-size: 1.5rem;
            cursor: pointer;
            color: #7f8c8d;
            transition: color 0.3s;
        }

        
        .close-modal:hover {
            color: #333;
            color: var(--color-accent);
        }

        .modal h2 {
            margin-bottom: 20px;
        
        .modal-title {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: white;
        }

        /* Story Form */
        .story-form .form-group {
            margin-bottom: 20px;
        
        .form-group {
            margin-bottom: 1.5rem;
        }

        .story-form label {
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .story-form input[type="text"],
        .story-form input[type="email"],
        .story-form textarea {
        
        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: 'Roboto', sans-serif;
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.05);
            color: white;
            font-family: 'Source Sans Pro', sans-serif;
        }

        .story-form textarea {
            min-height: 150px;
        
        .form-textarea {
            min-height: 120px;
            resize: vertical;
        }

        .file-upload {
            margin-bottom: 20px;
        
        .form-submit {
            background: var(--color-accent);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            transition: background 0.3s;
            width: 100%;
        }

        .file-upload-preview {
            margin-top: 10px;
            display: none;
        
        .form-submit:hover {
            background: #ff5c77;
        }

        .file-upload-preview img {
            max-height: 150px;
            border-radius: 4px;
        
        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin: 1rem 0;
        }

        /* Admin Panel */
        .admin-panel {
            display: none;
            padding: 40px 0;
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .admin-nav {
        
        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: 2.2rem;
            text-align: center;
            margin: 3rem 0 2rem;
            color: white;
        }
        
        .testimonials {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 3rem 0;
        }
        
        .testimonial {
            background: rgba(255, 255, 255, 0.05);
            padding: 2rem;
            border-radius: 15px;
            position: relative;
        }
        
        .testimonial:before {
            content: '"';
            font-family: 'Playfair Display', serif;
            font-size: 5rem;
            position: absolute;
            top: -1rem;
            left: 1rem;
            color: rgba(255, 255, 255, 0.1);
            line-height: 1;
        }
        
        .testimonial-text {
            font-style: italic;
            margin-bottom: 1.5rem;
        }
        
        .testimonial-author {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .author-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--color-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
            border-bottom: 1px solid #ddd;
            font-weight: bold;
        }

        .admin-nav a {
            padding: 10px 20px;
            margin: 0 10px;
            cursor: pointer;
            color: #7f8c8d;
            border-bottom: 3px solid transparent;
        
        .author-info {
            display: flex;
            flex-direction: column;
        }

        .admin-nav a.active {
            color: #3498db;
            border-bottom-color: #3498db;
        
        .author-name {
            font-weight: 600;
        }

        .admin-section {
            display: none;
        
        .author-role {
            font-size: 0.9rem;
            color: var(--color-gray);
        }

        .admin-section.active {
            display: block;
        
        footer {
            text-align: center;
            margin-top: 4rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--color-gray);
        }

        .stories-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 30px;
        
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin: 1.5rem 0;
            flex-wrap: wrap;
        }

        .stories-table th, .stories-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        
        .footer-links a {
            color: var(--color-gray);
            text-decoration: none;
            transition: color 0.3s;
        }

        .stories-table th {
            background-color: #f2f2f2;
            font-weight: 500;
        
        .footer-links a:hover {
            color: var(--color-accent);
        }

        .stories-table tr:hover {
            background-color: #f9f9f9;
        
        .how-it-works {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin: 3rem 0;
        }
        
        .step-card {
            background: rgba(255, 255, 255, 0.05);
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
        }

        .action-buttons {
        
        .step-number {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--color-accent);
            color: white;
            display: flex;
            gap: 5px;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.5rem;
            margin: 0 auto 1.5rem;
        }

        .action-btn {
            padding: 5px 10px;
            font-size: 14px;
            border-radius: 3px;
        
        .step-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        /* Story Detail Modal */
        .story-detail-img {
            height: 300px;
            background-color: #ddd;
            background-size: cover;
            background-position: center;
            margin-bottom: 20px;
            border-radius: 4px;
        
        .auth-modal-tabs {
            display: flex;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .story-meta {
        
        .auth-tab {
            flex: 1;
            text-align: center;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }
        
        .auth-tab.active {
            border-bottom: 3px solid var(--color-accent);
            color: var(--color-accent);
        }
        
        .auth-form {
            display: none;
        }
        
        .auth-form.active {
            display: block;
        }
        
        .role-selection {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            color: #7f8c8d;
            gap: 1rem;
            margin: 1rem 0;
        }

        /* Footer */
        footer {
            background-color: #2c3e50;
            color: white;
        
        .role-option {
            flex: 1;
            text-align: center;
            padding: 30px 0;
            padding: 1.5rem;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .admin-login {
            position: fixed;
            bottom: 20px;
            right: 20px;
        
        .role-option.selected {
            border-color: var(--color-accent);
            background: rgba(233, 69, 96, 0.1);
        }

        /* Responsive Design */
        
        .tomb-raider-option.selected {
            border-color: var(--color-tomb-raider);
            background: rgba(76, 201, 164, 0.1);
        }
        
        .undertaker-option.selected {
            border-color: var(--color-undertaker);
            background: rgba(156, 66, 245, 0.1);
        }
        
        .role-option-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }
        
        @media (max-width: 768px) {
            .hero-content h1 {
                font-size: 2.2rem;
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }

            .stories-grid {
            
            nav ul {
                gap: 1rem;
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .auth-buttons {
                margin-top: 1rem;
            }
            
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .graveyard-grid {
                grid-template-columns: 1fr;
            }

            .admin-nav {
            
            .search-box {
                flex-direction: column;
                align-items: center;
            }

            .admin-nav a {
                margin: 5px 0;
            }

            .action-buttons {
            
            .footer-links {
                flex-direction: column;
                gap: 1rem;
            }

            #story-map {
                height: 400px;
            
            .role-selection {
                flex-direction: column;
            }
        }

        /* Utility Classes */
        .text-center {
            text-align: center;
        }
        .mt-20 {
            margin-top: 20px;
        }
        .mb-20 {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <!-- Public View -->
    <div id="public-view">
        <header>
            <div class="hero-content">
                <h1>Cupertino Chronicles: Celebrating 70 Years of Community & Stories!</h1>
                <p>Share your memories and be part of Cupertino's rich history</p>
                <button id="share-story-btn" class="btn">Share Your Story</button>
    <header>
        <div class="container header-content">
            <div class="logo">
                <div class="logo-icon"><i class="fas fa-skull-crossbones"></i></div>
                <div class="logo-text">The Graveyard</div>
            </div>
        </header>
            <nav>
                <ul>
                    <li><a href="#" class="nav-link active" data-section="browse">Browse Graves</a></li>
                    <li><a href="#" class="nav-link" data-section="how-it-works">How It Works</a></li>
                    <li><a href="#" class="nav-link" data-section="success-stories">Success Stories</a></li>
                    <li><a href="#" id="list-grave-link">List a Project</a></li>
                    <li class="auth-buttons">
                        <button class="auth-button login-btn" id="login-button">Log In</button>
                        <button class="auth-button signup-btn" id="signup-button">Sign Up</button>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

        <section class="about-section">
            <div class="container">
                <h2>About The Project</h2>
                <div class="about-content">
                    <p>As Cupertino celebrates its 70th anniversary, we're collecting stories from residents past and present to create a living history of our community. From the orchards of the past to the tech hub of today, every story helps paint a picture of what makes Cupertino special.</p>
                    <p>Share your personal memories, historical moments, or everyday experiences that capture the spirit of our city. All stories will be reviewed by our team before publication to ensure they meet community guidelines.</p>
                </div>
            </div>
    <div class="container">
        <section class="hero">
            <h1>Where Failed SaaS Finds New Life</h1>
            <p>Discover, acquire, and resurrect technology projects with potential. Perfect for indie developers and small teams.</p>
            <a href="#" class="cta-button" id="hero-cta">Resurrect a Project</a>
        </section>

        <section class="stories-section">
            <div class="container">
                <h2 class="section-title">Top Stories</h2>
                <div id="stories-grid" class="stories-grid">
                    <!-- Stories will be dynamically inserted here -->
        <section class="roles-section">
            <div class="role-card tomb-raider-card">
                <div class="role-icon tomb-raider-icon">
                    <i class="fas fa-helmet-battle"></i>
                </div>
                <h2 class="role-title">Tomb Raiders</h2>
                <p class="role-description">
                    Adventurous developers and entrepreneurs seeking hidden treasures among failed SaaS projects. 
                    Find undervalued projects with potential for resurrection and new life.
                </p>
                <a href="#" class="role-button tomb-raider-button" id="tomb-raider-signup">Become a Tomb Raider</a>
            </div>
        </section>

        <section class="map-section">
            <div class="container">
                <h2 class="section-title">Stories Map</h2>
                <p class="text-center mb-20">Explore Cupertino through the locations of our community's stories</p>
                <div class="map-container">
                    <div id="story-map"></div>
                    <div class="map-overlay">
                        <button id="locate-cupertino" class="btn btn-secondary" style="padding: 8px 12px;">Center Map</button>
                    </div>
            
            <div class="role-card undertaker-card">
                <div class="role-icon undertaker-icon">
                    <i class="fas fa-coffin"></i>
                </div>
                <h2 class="role-title">Undertakers</h2>
                <p class="role-description">
                    Founders who need to respectfully lay their projects to rest while recouping some value. 
                    List your failed SaaS projects for others to discover and revive.
                </p>
                <a href="#" class="role-button undertaker-button" id="undertaker-signup">Become an Undertaker</a>
            </div>
        </section>

        <footer>
            <div class="container">
                <p>Cupertino Chronicles &copy; 2025 | A project celebrating Cupertino's 70th anniversary</p>
                <p class="mt-20"><small>This is a demonstration prototype only. No actual data is being permanently stored.</small></p>
        <section class="search-section">
            <div class="search-box">
                <input type="text" class="search-input" placeholder="Search by technology, niche, or keyword...">
                <button class="search-button"><i class="fas fa-search"></i> Search</button>
            </div>
            <div class="filters">
                <button class="filter-button active">All</button>
                <button class="filter-button">Under $1K</button>
                <button class="filter-button">With Codebase</button>
                <button class="filter-button">Profitable</button>
                <button class="filter-button">Recent</button>
            </div>
        </footer>
        </section>

        <div class="admin-login">
            <button id="admin-login-btn" class="btn btn-secondary">Admin Login</button>
        </div>
    </div>
        <section id="browse" class="active-section">
            <h2 class="section-title">Available for Resurrection</h2>

            <div class="graveyard-grid">
                <!-- Grave 1 -->
                <div class="grave-card">
                    <div class="grave-card-header">
                        <h3 class="grave-card-title">AnalytixPro</h3>
                        <div class="grave-card-meta">
                            <span><i class="fas fa-coins"></i> Was $29/mo</span>
                            <span><i class="fas fa-users"></i> 142 users</span>
                        </div>
                    </div>
                    <div class="grave-card-body">
                        <p class="grave-card-description">
                            Advanced analytics dashboard with 12+ integrations. Failed due to high customer acquisition costs in a competitive market.
                        </p>
                        <div class="grave-card-assets">
                            <span class="asset-tag"><i class="fas fa-globe"></i> Domain</span>
                            <span class="asset-tag"><i class="fas fa-code"></i> Full Codebase</span>
                            <span class="asset-tag"><i class="fas fa-database"></i> User Database</span>
                        </div>
                    </div>
                    <div class="grave-card-footer">
                        <div>
                            <div class="grave-price">$1,200</div>
                            <div class="price-badge">Budget Friendly</div>
                        </div>
                        <button class="inquire-button" data-grave="AnalytixPro">Inquire to Revive</button>
                    </div>
                </div>

    <!-- Admin Panel (hidden by default) -->
    <div id="admin-panel" class="admin-panel">
        <div class="container">
            <h2 class="text-center">Cupertino Chronicles Admin Panel</h2>
            <p class="text-center mb-20">4 Eyes Validation System</p>
                <!-- Grave 2 -->
                <div class="grave-card">
                    <div class="grave-card-header">
                        <h3 class="grave-card-title">ContentForge</h3>
                        <div class="grave-card-meta">
                            <span><i class="fas fa-coins"></i> Was $19/mo</span>
                            <span><i class="fas fa-users"></i> 87 users</span>
                        </div>
                    </div>
                    <div class="grave-card-body">
                        <p class="grave-card-description">
                            AI-powered content generation platform. Solid technology but founder ran out of funding for marketing.
                        </p>
                        <div class="grave-card-assets">
                            <span class="asset-tag"><i class="fas fa-globe"></i> Domain</span>
                            <span class="asset-tag"><i class="fas fa-code"></i> Full Codebase</span>
                            <span class="asset-tag"><i class="fas fa-server"></i> API Access</span>
                        </div>
                    </div>
                    <div class="grave-card-footer">
                        <div>
                            <div class="grave-price">$850</div>
                            <div class="price-badge">Great Deal</div>
                        </div>
                        <button class="inquire-button" data-grave="ContentForge">Inquire to Revive</button>
                    </div>
                </div>

            <div class="admin-nav">
                <a href="#" class="active" data-section="pending">Review Pending Stories</a>
                <a href="#" data-section="published">Manage Published Stories</a>
                <a href="#" id="return-to-public">Return to Public View</a>
                <!-- Grave 3 -->
                <div class="grave-card">
                    <div class="grave-card-header">
                        <h3 class="grave-card-title">TaskFlow</h3>
                        <div class="grave-card-meta">
                            <span><i class="fas fa-coins"></i> Was $15/mo</span>
                            <span><i class="fas fa-users"></i> 260 users</span>
                        </div>
                    </div>
                    <div class="grave-card-body">
                        <p class="grave-card-description">
                            Team productivity SaaS with unique workflow automation. Discontinued due to founder's change of focus.
                        </p>
                        <div class="grave-card-assets">
                            <span class="asset-tag"><i class="fas fa-globe"></i> Domain</span>
                            <span class="asset-tag"><i class="fas fa-code"></i> Full Codebase</span>
                            <span class="asset-tag"><i class="fas fa-users"></i> Active Users</span>
                        </div>
                    </div>
                    <div class="grave-card-footer">
                        <div>
                            <div class="grave-price">$1,500</div>
                            <div class="price-badge">Popular</div>
                        </div>
                        <button class="inquire-button" data-grave="TaskFlow">Inquire to Revive</button>
                    </div>
                </div>
            </div>
        </section>

            <div id="pending-stories-section" class="admin-section active">
                <h3>Pending Review</h3>
                <table class="stories-table">
                    <thead>
                        <tr>
                            <th>Title</th>
                            <th>Author</th>
                            <th>Date Submitted</th>
                            <th>Preview</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="pending-stories-list">
                        <!-- Pending stories will be inserted here -->
                    </tbody>
                </table>
        <section id="how-it-works" class="about-section">
            <h2 class="section-title">How It Works</h2>
            
            <div class="how-it-works">
                <div class="step-card">
                    <div class="step-number">1</div>
                    <h3 class="step-title">Choose Your Role</h3>
                    <p>Sign up as a Tomb Raider (buyer) or Undertaker (seller) based on your needs.</p>
                </div>
                
                <div class="step-card">
                    <div class="step-number">2</div>
                    <h3 class="step-title">Explore or List</h3>
                    <p>Tomb Raiders browse projects, while Undertakers list their failed SaaS projects.</p>
                </div>
                
                <div class="step-card">
                    <div class="step-number">3</div>
                    <h3 class="step-title">Connect & Revive</h3>
                    <p>We facilitate connections between buyers and sellers to give projects a second life.</p>
                </div>
            </div>
        </section>

            <div id="published-stories-section" class="admin-section">
                <h3>Published Stories</h3>
                <table class="stories-table">
                    <thead>
                        <tr>
                            <th>Title</th>
                            <th>Author</th>
                            <th>Date Published</th>
                            <th>Preview</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="published-stories-list">
                        <!-- Published stories will be inserted here -->
                    </tbody>
                </table>
        <section id="success-stories" class="about-section">
            <h2 class="section-title">Resurrection Success Stories</h2>

            <div class="testimonials">
                <div class="testimonial">
                    <p class="testimonial-text">
                        "As a Tomb Raider, I found SocialScheduler for just $600. With some rebranding and improved onboarding, we've grown it to $2k MRR in just 9 months."
                    </p>
                    <div class="testimonial-author">
                        <div class="author-avatar">MJ</div>
                        <div class="author-info">
                            <div class="author-name">Michael Johnson</div>
                            <div class="user-role-badge tomb-raider-badge">Tomb Raider</div>
                        </div>
                    </div>
                </div>
                
                <div class="testimonial">
                    <p class="testimonial-text">
                        "As an Undertaker, I was able to recover some value from my failed project and see it revived by someone with more time and resources."
                    </p>
                    <div class="testimonial-author">
                        <div class="author-avatar">SL</div>
                        <div class="author-info">
                            <div class="author-name">Sarah Lin</div>
                            <div class="user-role-badge undertaker-badge">Undertaker</div>
                        </div>
                    </div>
                </div>
                
                <div class="testimonial">
                    <p class="testimonial-text">
                        "The Graveyard helped me find a project that matched my skills perfectly. I acquired DataViz for $800 and pivoted it to a new niche."
                    </p>
                    <div class="testimonial-author">
                        <div class="author-avatar">RP</div>
                        <div class="author-info">
                            <div class="author-name">Robert Parker</div>
                            <div class="user-role-badge tomb-raider-badge">Tomb Raider</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </section>
    </div>

    <!-- Story Submission Modal -->
    <div id="story-submission-modal" class="modal">
    <!-- Auth Modal -->
    <div class="modal" id="auth-modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Share Your Cupertino Story</h2>
            <form id="story-form" class="story-form">
            <button class="close-modal">&times;</button>
            <h2 class="modal-title" id="auth-modal-title">Join The Graveyard</h2>
            
            <div class="auth-modal-tabs">
                <div class="auth-tab active" data-tab="signup">Sign Up</div>
                <div class="auth-tab" data-tab="login">Log In</div>
            </div>
            
            <form id="signup-form" class="auth-form active">
                <div class="form-group">
                    <label for="story-title">Story Title*</label>
                    <input type="text" id="story-title" required>
                    <label class="form-label">Choose Your Role</label>
                    <div class="role-selection">
                        <div class="role-option tomb-raider-option selected" data-role="tomb-raider">
                            <div class="role-option-icon tomb-raider-icon">
                                <i class="fas fa-helmet-battle"></i>
                            </div>
                            <div>Tomb Raider</div>
                        </div>
                        <div class="role-option undertaker-option" data-role="undertaker">
                            <div class="role-option-icon undertaker-icon">
                                <i class="fas fa-coffin"></i>
                            </div>
                            <div>Undertaker</div>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="story-content">Your Story*</label>
                    <textarea id="story-content" required></textarea>
                    <label class="form-label">Email Address</label>
                    <input type="email" class="form-input" required>
                </div>
                
                <div class="form-group">
                    <label for="author-name">Your Name (Optional)</label>
                    <input type="text" id="author-name">
                    <label class="form-label">Password</label>
                    <input type="password" class="form-input" required>
                </div>
                
                <div class="form-group">
                    <label for="author-email">Email (Optional - for admin use only)</label>
                    <input type="email" id="author-email">
                    <label class="form-label">Confirm Password</label>
                    <input type="password" class="form-input" required>
                </div>
                
                <button type="submit" class="form-submit">Create Account</button>
            </form>
            
            <form id="login-form" class="auth-form">
                <div class="form-group">
                    <label for="story-date">Approximate Date/Year*</label>
                    <input type="text" id="story-date" required placeholder="e.g., 1980s or 1995">
                    <label class="form-label">Email Address</label>
                    <input type="email" class="form-input" required>
                </div>
                
                <div class="form-group">
                    <label for="story-location">Location in Cupertino (Optional)</label>
                    <input type="text" id="story-location" placeholder="e.g., Memorial Park or De Anza Blvd">
                </div>
                <div class="form-group file-upload">
                    <label>Upload Photo (Optional)</label>
                    <input type="file" id="story-image" accept="image/*">
                    <div class="file-upload-preview" id="image-preview">
                        <img id="preview-image" src="#" alt="Preview">
                    </div>
                    <label class="form-label">Password</label>
                    <input type="password" class="form-input" required>
                </div>
                <button type="submit" class="btn">Submit Story</button>
                
                <button type="submit" class="form-submit">Log In</button>
            </form>
        </div>
    </div>

    <!-- Story Detail Modal -->
    <div id="story-detail-modal" class="modal">
    <!-- List a Grave Modal -->
    <div class="modal" id="list-grave-modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div id="story-detail-content">
                <!-- Story details will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Admin Edit Story Modal -->
    <div id="admin-edit-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Edit Story</h2>
            <form id="admin-edit-form" class="story-form">
                <input type="hidden" id="edit-story-id">
            <button class="close-modal">&times;</button>
            <h2 class="modal-title">List Your Project</h2>
            <form id="grave-form">
                <div class="form-group">
                    <label class="form-label">Project Name</label>
                    <input type="text" class="form-input" required>
                </div>
                
                <div class="form-group">
                    <label for="edit-story-title">Story Title*</label>
                    <input type="text" id="edit-story-title" required>
                    <label class="form-label">Reason for Discontinuation</label>
                    <select class="form-select" required>
                        <option value="">Select primary reason...</option>
                        <option>Ran out of funding</option>
                        <option>Lack of market need</option>
                        <option>Founder disputes</option>
                        <option>Acquired another opportunity</option>
                        <option>Technical challenges</option>
                        <option>Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="edit-story-content">Story Content*</label>
                    <textarea id="edit-story-content" required></textarea>
                    <label class="form-label">Project Description & Lessons Learned</label>
                    <textarea class="form-textarea" required></textarea>
                </div>
                
                <div class="form-group">
                    <label for="edit-author-name">Author Name</label>
                    <input type="text" id="edit-author-name">
                    <label class="form-label">Assets Available</label>
                    <div class="checkbox-group">
                        <label class="checkbox-item">
                            <input type="checkbox" name="assets"> Domain Name
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="assets"> Codebase
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="assets"> User Database
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="assets"> Social Accounts
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="assets"> Documentation
                        </label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="edit-author-email">Author Email</label>
                    <input type="email" id="edit-author-email">
                    <label class="form-label">Asking Price (USD)</label>
                    <input type="number" class="form-input" placeholder="Enter amount">
                </div>
                
                <button type="submit" class="form-submit">Submit for Review</button>
            </form>
        </div>
    </div>

    <!-- Inquire Modal -->
    <div class="modal" id="inquire-modal">
        <div class="modal-content">
            <button class="close-modal">&times;</button>
            <h2 class="modal-title">Inquire About <span id="inquire-project-name"></span></h2>
            <form id="inquire-form">
                <div class="form-group">
                    <label for="edit-story-date">Date/Year*</label>
                    <input type="text" id="edit-story-date" required>
                    <label class="form-label">Your Name</label>
                    <input type="text" class="form-input" required>
                </div>
                
                <div class="form-group">
                    <label for="edit-story-location">Location</label>
                    <input type="text" id="edit-story-location">
                    <label class="form-label">Your Email</label>
                    <input type="email" class="form-input" required>
                </div>
                
                <div class="form-group">
                    <label for="edit-story-status">Status</label>
                    <select id="edit-story-status">
                        <option value="pending">Pending</option>
                        <option value="published">Published</option>
                        <option value="rejected">Rejected</option>
                    <label class="form-label">Your Background/Experience</label>
                    <select class="form-select" required>
                        <option value="">Select your background...</option>
                        <option>Developer/Technical Founder</option>
                        <option>Marketing/Business Founder</option>
                        <option>Investor</option>
                        <option>Company looking to acquire</option>
                        <option>Other</option>
                    </select>
                </div>
                <div class="action-buttons">
                    <button type="submit" class="btn btn-success">Save Changes</button>
                    <button type="button" id="cancel-edit" class="btn btn-secondary">Cancel</button>
                
                <div class="form-group">
                    <label class="form-label">Your Revival Plan</label>
                    <textarea class="form-textarea" placeholder="Briefly describe how you plan to revive this project..." required></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Offer Price (USD)</label>
                    <input type="number" class="form-input" placeholder="Enter your offer amount">
                </div>
                
                <button type="submit" class="form-submit">Submit Inquiry</button>
            </form>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmation-modal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <span class="close-modal">&times;</span>
            <h2 id="confirmation-title">Confirm Action</h2>
            <p id="confirmation-message">Are you sure you want to perform this action?</p>
            <div class="action-buttons" style="justify-content: center; margin-top: 30px;">
                <button id="confirm-action" class="btn btn-danger">Confirm</button>
                <button id="cancel-action" class="btn btn-secondary">Cancel</button>
    <footer>
        <div class="container">
            <div class="footer-links">
                <a href="#">About Us</a>
                <a href="#">How It Works</a>
                <a href="#">FAQ</a>
                <a href="#">Contact</a>
                <a href="#">Terms of Service</a>
                <a href="#">Privacy Policy</a>
            </div>
            <p> 2023 The Graveyard. All rights reserved.</p>
        </div>
    </div>

    <!-- Submission Success Modal -->
    <div id="submission-success-modal" class="modal">
        <div class="modal-content" style="max-width: 500px; text-align: center;">
            <span class="close-modal">&times;</span>
            <h2>Thank You!</h2>
            <p>Your story has been submitted for review. Our team will evaluate it and you'll be notified if it's approved for publication.</p>
            <button id="close-success-modal" class="btn" style="margin-top: 20px;">Close</button>
        </div>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script>
    <!-- Marker clustering plugin -->
    <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>
    </footer>

    <script>
        // Demo Data - Initial stories
        let stories = [
            {
                id: '1',
                title: 'My First Day in Cupertino - 1975',
                content: 'I remember arriving in Cupertino in the summer of 1975. The orchards stretched as far as the eye could see, and the smell of apricots was everywhere. My family had just moved from the East Coast, and everything felt so different. The small downtown area had just a few shops, and everyone seemed to know each other. I started school at Cupertino Middle School that fall, where I made lifelong friends. Even as the city has grown and changed, those early memories of a small, close-knit community stay with me.',
                author: 'Susan Thompson',
                email: 'susan@example.com',
                date: '1975',
                location: 'Near Cupertino Middle School',
                imageUrl: 'https://images.unsplash.com/photo-1477959858617-67f85cf4f1df?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
                status: 'published',
                timestamp: 1625097600000
            },
            {
                id: '2',
                title: 'The Old Cupertino Library Memories',
                content: 'The old Cupertino Library on Torre Avenue was my second home growing up in the 1980s. I would ride my bike there every Saturday morning and spend hours browsing the shelves. The librarians knew me by name and would recommend new books they thought I might like. When the new library opened, I was excited about the modern facilities but also sad to see the old one go. That small building held so many memories of discovering new worlds through books and meeting friends for study sessions. The wooden tables with carved initials, the smell of old books, and the quiet hum of the ceiling fans are all vivid in my memory.',
                author: 'Michael Chen',
                email: 'michael@example.com',
                date: '1980s',
                location: 'Torre Avenue',
                imageUrl: 'https://images.unsplash.com/photo-1521587760476-6c12a4b040da?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
                status: 'published',
                timestamp: 1625184000000
            },
            {
                id: '3',
                title: 'Apple Campus Through the Years',
                content: 'I\'ve worked near the Apple campus since the late 1990s and have watched it transform over the decades. In the early days, it was just a few nondescript buildings. I remember when the first glass-fronted buildings went up, and we all marveled at the design. The construction of the spaceship campus was an event we all followed closely - the cranes, the gradual taking shape of the ring. But what hasn\'t changed is the energy of the place. Even as Apple grew from a struggling company to a tech giant, that sense of innovation and possibility has remained constant. The campus may look different, but the spirit feels the same.',
                author: 'Raj Patel',
                email: 'raj@example.com',
                date: '1990s-2020s',
                location: 'Apple Campus',
                imageUrl: 'https://images.unsplash.com/photo-1518770660439-4636190af475?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
                status: 'published',
                timestamp: 1625270400000
            },
            {
                id: '4',
                title: 'A Childhood on De Anza Blvd',
                content: 'I grew up in a house on De Anza Blvd in the 1960s, when it was still a quiet residential street. Our backyard bordered an apricot orchard, and in the summer, the farmer would let us kids pick fruit in exchange for helping with the harvest. We would ride our bikes up and down the street without a care, playing hide and seek in the orchards after school. The construction of the shopping center in the early 70s was a big event - we couldn\'t believe we were getting our own "mall"! Now when I drive down De Anza, I can barely recognize the street of my childhood, but the memories remain vivid.',
                author: 'Linda Garcia',
                email: 'linda@example.com',
                date: '1960s',
                location: 'De Anza Blvd',
                imageUrl: '',
                status: 'pending',
                timestamp: 1625356800000
            },
            {
                id: '5',
                title: 'Local Park Renovation Story',
                content: 'When Memorial Park was renovated in 2012, I was skeptical about the changes. The old playground had been there since my own childhood, and my kids had played on those same swings and slides. But watching the community come together to plan the new park changed my mind. The city held meetings where residents could give input, and they really listened. The result is a space that honors the park\'s history while meeting modern needs. The dedication ceremony, where they incorporated pieces of the old playground into a memorial wall, was particularly moving. It showed how Cupertino values both progress and preservation.',
                author: 'David Kim',
                email: 'david@example.com',
                date: '2012',
                location: 'Memorial Park',
                imageUrl: '',
                status: 'pending',
                timestamp: 1625443200000
            }
        ];

        // DOM Elements
        const publicView = document.getElementById('public-view');
        const adminPanel = document.getElementById('admin-panel');
        const adminLoginBtn = document.getElementById('admin-login-btn');
        const returnToPublicBtn = document.getElementById('return-to-public');
        const shareStoryBtn = document.getElementById('share-story-btn');
        const storiesGrid = document.getElementById('stories-grid');
        const pendingStoriesList = document.getElementById('pending-stories-list');
        const publishedStoriesList = document.getElementById('published-stories-list');
        const storyForm = document.getElementById('story-form');
        const adminEditForm = document.getElementById('admin-edit-form');
        const adminNavLinks = document.querySelectorAll('.admin-nav a');
        const adminSections = document.querySelectorAll('.admin-section');

        // Modals
        const storySubmissionModal = document.getElementById('story-submission-modal');
        const storyDetailModal = document.getElementById('story-detail-modal');
        const adminEditModal = document.getElementById('admin-edit-modal');
        const confirmationModal = document.getElementById('confirmation-modal');
        const submissionSuccessModal = document.getElementById('submission-success-modal');
        const closeModalBtns = document.querySelectorAll('.close-modal');
        const closeSuccessModalBtn = document.getElementById('close-success-modal');
        const cancelEditBtn = document.getElementById('cancel-edit');
        const confirmActionBtn = document.getElementById('confirm-action');
        const cancelActionBtn = document.getElementById('cancel-action');

        // Form elements
        const imageUpload = document.getElementById('story-image');
        const imagePreview = document.getElementById('image-preview');
        const previewImage = document.getElementById('preview-image');

        // Map elements
        const locateCupertinoBtn = document.getElementById('locate-cupertino');

        // Map variables
        let storyMap;
        let markerClusterGroup;
        const cupertinoCoords = [37.322998, -122.032181]; // Approximate center of Cupertino

        // State variables
        let currentAction = null;
        let currentStoryId = null;

        // Initialize the app
        function init() {
            // Load stories from localStorage if available
            const savedStories = localStorage.getItem('cupertinoChroniclesStories');
            if (savedStories) {
                stories = JSON.parse(savedStories);
            } else {
                // Save initial stories to localStorage
                saveStories();
            }

            // Initialize the map
            initMap();

            // Render public view
            renderStories();
            renderMapMarkers();

            // Set up event listeners
            setupEventListeners();
        }

        // Set up all event listeners
        function setupEventListeners() {
            // Admin login
            adminLoginBtn.addEventListener('click', showAdminPanel);
            returnToPublicBtn.addEventListener('click', showPublicView);

            // Story submission
            shareStoryBtn.addEventListener('click', () => {
                openModal(storySubmissionModal);
            });

            // Form submission
            storyForm.addEventListener('submit', submitStory);
            adminEditForm.addEventListener('submit', saveEditedStory);

            // Image upload preview
            imageUpload.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        previewImage.src = event.target.result;
                        imagePreview.style.display = 'block';
                    };
                    reader.readAsDataURL(file);
                }
            });

            // Close modals
            closeModalBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    closeAllModals();
                });
            });

            closeSuccessModalBtn.addEventListener('click', () => {
                closeModal(submissionSuccessModal);
            });

            cancelEditBtn.addEventListener('click', () => {
                closeModal(adminEditModal);
        // Modal functionality
        const listGraveLink = document.getElementById('list-grave-link');
        const authModal = document.getElementById('auth-modal');
        const listGraveModal = document.getElementById('list-grave-modal');
        const inquireModal = document.getElementById('inquire-modal');
        const closeButtons = document.querySelectorAll('.close-modal');
        const inquireButtons = document.querySelectorAll('.inquire-button');
        const inquireProjectName = document.getElementById('inquire-project-name');
        const heroCta = document.getElementById('hero-cta');
        const signupButton = document.getElementById('signup-button');
        const loginButton = document.getElementById('login-button');
        const authTabs = document.querySelectorAll('.auth-tab');
        const authForms = document.querySelectorAll('.auth-form');
        const roleOptions = document.querySelectorAll('.role-option');
        const tombRaiderSignup = document.getElementById('tomb-raider-signup');
        const undertakerSignup = document.getElementById('undertaker-signup');
        
        // Open auth modal
        signupButton.addEventListener('click', function(e) {
            e.preventDefault();
            authModal.style.display = 'flex';
            document.getElementById('auth-modal-title').textContent = 'Join The Graveyard';
            switchAuthTab('signup');
        });
        
        loginButton.addEventListener('click', function(e) {
            e.preventDefault();
            authModal.style.display = 'flex';
            document.getElementById('auth-modal-title').textContent = 'Log In to Your Account';
            switchAuthTab('login');
        });
        
        tombRaiderSignup.addEventListener('click', function(e) {
            e.preventDefault();
            authModal.style.display = 'flex';
            switchAuthTab('signup');
            selectRole('tomb-raider');
        });
        
        undertakerSignup.addEventListener('click', function(e) {
            e.preventDefault();
            authModal.style.display = 'flex';
            switchAuthTab('signup');
            selectRole('undertaker');
        });
        
        // Open list grave modal
        listGraveLink.addEventListener('click', function(e) {
            e.preventDefault();
            listGraveModal.style.display = 'flex';
        });
        
        // Open inquire modal
        inquireButtons.forEach(button => {
            button.addEventListener('click', function() {
                inquireProjectName.textContent = this.getAttribute('data-grave');
                inquireModal.style.display = 'flex';
            });

            // Admin navigation
            adminNavLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const section = link.dataset.section;
                    if (section) {
                        showAdminSection(section);
                    }
                });
        });
        
        // Hero CTA also opens inquire modal
        heroCta.addEventListener('click', function(e) {
            e.preventDefault();
            inquireProjectName.textContent = 'a Project';
            inquireModal.style.display = 'flex';
        });
        
        // Close modals
        closeButtons.forEach(button => {
            button.addEventListener('click', function() {
                authModal.style.display = 'none';
                listGraveModal.style.display = 'none';
                inquireModal.style.display = 'none';
            });

            // Confirmation modal
            confirmActionBtn.addEventListener('click', confirmAction);
            cancelActionBtn.addEventListener('click', () => {
                closeModal(confirmationModal);
        });
        
        // Close modal when clicking outside
        window.addEventListener('click', function(e) {
            if (e.target === authModal) {
                authModal.style.display = 'none';
            }
            if (e.target === listGraveModal) {
                listGraveModal.style.display = 'none';
            }
            if (e.target === inquireModal) {
                inquireModal.style.display = 'none';
            }
        });
        
        // Auth tabs
        authTabs.forEach(tab => {
            tab.addEventListener('click', function() {
                const tabName = this.getAttribute('data-tab');
                switchAuthTab(tabName);
            });

            // Close modal when clicking outside content
            window.addEventListener('click', (e) => {
                if (e.target.classList.contains('modal')) {
                    closeAllModals();
        });
        
        function switchAuthTab(tabName) {
            authTabs.forEach(tab => {
                tab.classList.remove('active');
                if (tab.getAttribute('data-tab') === tabName) {
                    tab.classList.add('active');
                }
            });
        }

        // Initialize the map
        function initMap() {
            storyMap = L.map('story-map').setView(cupertinoCoords, 13);
            
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(storyMap);
            
            // Initialize marker cluster group
            markerClusterGroup = L.markerClusterGroup();
            storyMap.addLayer(markerClusterGroup);
            
            // Add locate button event
            locateCupertinoBtn.addEventListener('click', () => {
                storyMap.setView(cupertinoCoords, 13);
            });
        }

        // Render markers on the map
        function renderMapMarkers() {
            // Clear existing markers
            markerClusterGroup.clearLayers();
            
            // Add markers for published stories with locations
            const publishedStories = stories.filter(story => 
                story.status === 'published' && story.location
            );

            // Known locations for demo purposes
            const demoLocations = {
                'Near Cupertino Middle School': [37.3226, -122.0286],
                'Torre Avenue': [37.3235, -122.0418],
                'Apple Campus': [37.3318, -122.0312],
                'De Anza Blvd': [37.3189, -122.0425],
                'Memorial Park': [37.3243, -122.0385]
            };
            
            publishedStories.forEach(story => {
                // Try to get coordinates for the location
                let coords = demoLocations[story.location] || null;
                
                if (!coords) {
                    // If no exact coordinates, use approximate Cupertino location with slight random offset
                    coords = [
                        cupertinoCoords[0] + (Math.random() * 0.02 - 0.01),
                        cupertinoCoords[1] + (Math.random() * 0.02 - 0.01)
                    ];
            authForms.forEach(form => {
                form.classList.remove('active');
                if (form.id === `${tabName}-form`) {
                    form.classList.add('active');
                }
                
                const marker = L.marker(coords);
                
                // Create popup content
                let popupContent = `<h3>${story.title}</h3>`;
                if (story.author) popupContent += `<p><em>By ${story.author}</em></p>`;
                if (story.date) popupContent += `<p>${story.date}</p>`;
                popupContent += `<p>${story.content.substring(0, 100)}...</p>`;
                popupContent += `<button class="btn" onclick="showStoryDetail('${story.id}')">Read Full Story</button>`;
                
                marker.bindPopup(popupContent, { maxWidth: 300 });
                markerClusterGroup.addLayer(marker);
            });
        }

        // Render stories in public view
        function renderStories() {
            storiesGrid.innerHTML = '';
            
            const publishedStories = stories.filter(story => story.status === 'published');
            publishedStories.sort((a, b) => b.timestamp - a.timestamp);
            
            publishedStories.forEach(story => {
                const storyCard = createStoryCard(story);
                storiesGrid.appendChild(storyCard);
        
        // Role selection
        roleOptions.forEach(option => {
            option.addEventListener('click', function() {
                const role = this.getAttribute('data-role');
                selectRole(role);
            });
        }

        // Create a story card element
        function createStoryCard(story) {
            const card = document.createElement('div');
            card.className = 'story-card';
            card.dataset.id = story.id;
            
            let imageUrl = story.imageUrl || 'https://via.placeholder.com/300x200?text=Cupertino+Story';
            
            card.innerHTML = `
                <div class="story-card-img" style="background-image: url('${imageUrl}')"></div>
                <div class="story-card-content">
                    <h3>${story.title}</h3>
                    <p>${story.content.substring(0, 100)}...</p>
                    ${story.author ? `<p class="author"> ${story.author}</p>` : ''}
                </div>
            `;
            
            card.addEventListener('click', () => {
                showStoryDetail(story.id);
        });
        
        function selectRole(role) {
            roleOptions.forEach(option => {
                option.classList.remove('selected');
                if (option.getAttribute('data-role') === role) {
                    option.classList.add('selected');
                }
            });
            
            return card;
        }

        // Show story detail in modal
        function showStoryDetail(storyId) {
            const story = stories.find(s => s.id === storyId);
            if (!story) return;
            
            const detailContent = document.getElementById('story-detail-content');
            let imageUrl = story.imageUrl || 'https://via.placeholder.com/800x400?text=Cupertino+Story';
            
            detailContent.innerHTML = `
                <div class="story-detail-img" style="background-image: url('${imageUrl}')"></div>
                <h2>${story.title}</h2>
                <div class="story-meta">
                    ${story.author ? `<span>By ${story.author}</span>` : ''}
                    ${story.date ? `<span>${story.date}</span>` : ''}
                    ${story.location ? `<span>${story.location}</span>` : ''}
                </div>
                <p>${story.content}</p>
            `;
            
            openModal(storyDetailModal);
        }

        // Submit new story
        function submitStory(e) {
        
        // Form submissions
        document.getElementById('signup-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const title = document.getElementById('story-title').value;
            const content = document.getElementById('story-content').value;
            const author = document.getElementById('author-name').value;
            const email = document.getElementById('author-email').value;
            const date = document.getElementById('story-date').value;
            const location = document.getElementById('story-location').value;
            
            const newStory = {
                id: generateId(),
                title,
                content,
                author,
                email,
                date,
                location,
                imageUrl: previewImage.src !== '#' ? previewImage.src : '',
                status: 'pending',
                timestamp: Date.now()
            };
            
            stories.push(newStory);
            saveStories();
            
            // Reset form
            storyForm.reset();
            imagePreview.style.display = 'none';
            previewImage.src = '#';
            
            // Close submission modal and show success
            closeModal(storySubmissionModal);
            openModal(submissionSuccessModal);
            
            // If in admin view, refresh pending stories
            if (adminPanel.style.display === 'block') {
                renderPendingStories();
            }
        }

        // Show admin panel
        function showAdminPanel() {
            // NOTE: In a real application, this would use secure authentication
            // This is for demo purposes only
            const password = prompt('Enter admin password:');
            if (password === 'cupertino2025') {
                publicView.style.display = 'none';
                adminPanel.style.display = 'block';
                renderPendingStories();
                renderPublishedStories();
            } else if (password !== null) {
                alert('Incorrect password');
            }
        }

        // Show public view
        function showPublicView() {
            publicView.style.display = 'block';
            adminPanel.style.display = 'none';
        }

        // Show specific admin section
        function showAdminSection(section) {
            adminSections.forEach(sec => {
                sec.classList.remove('active');
            });
            
            adminNavLinks.forEach(link => {
                link.classList.remove('active');
            });
            
            document.getElementById(`${section}-stories-section`).classList.add('active');
            document.querySelector(`.admin-nav a[data-section="${section}"]`).classList.add('active');
            
            if (section === 'pending') {
                renderPendingStories();
            } else if (section === 'published') {
                renderPublishedStories();
            }
        }

        // Render pending stories in admin view
        function renderPendingStories() {
            pendingStoriesList.innerHTML = '';
            
            const pendingStories = stories.filter(story => story.status === 'pending');
            pendingStories.sort((a, b) => b.timestamp - a.timestamp);
            
            if (pendingStories.length === 0) {
                pendingStoriesList.innerHTML = '<tr><td colspan="5" style="text-align: center;">No pending stories to review</td></tr>';
                return;
            }
            
            pendingStories.forEach(story => {
                const row = document.createElement('tr');
                row.dataset.id = story.id;
                
                row.innerHTML = `
                    <td>${story.title}</td>
                    <td>${story.author || 'Anonymous'}</td>
                    <td>${new Date(story.timestamp).toLocaleDateString()}</td>
                    <td>${story.content.substring(0, 50)}...</td>
                    <td class="action-buttons">
                        <button class="btn action-btn view-pending-btn">View</button>
                        <button class="btn action-btn btn-success approve-btn">Approve</button>
                        <button class="btn action-btn edit-btn">Edit</button>
                        <button class="btn action-btn btn-danger reject-btn">Reject</button>
                    </td>
                `;
                
                pendingStoriesList.appendChild(row);
                
                // Add event listeners to buttons
                row.querySelector('.view-pending-btn').addEventListener('click', () => {
                    showStoryDetail(story.id);
                });
                
                row.querySelector('.approve-btn').addEventListener('click', () => {
                    showConfirmation('approve', story.id, `Approve "${story.title}" for publication?`);
                });
                
                row.querySelector('.edit-btn').addEventListener('click', () => {
                    editStory(story.id);
                });
                
                row.querySelector('.reject-btn').addEventListener('click', () => {
                    showConfirmation('reject', story.id, `Reject "${story.title}"?`);
                });
            });
        }

        // Render published stories in admin view
        function renderPublishedStories() {
            publishedStoriesList.innerHTML = '';
            
            const publishedStories = stories.filter(story => story.status === 'published');
            publishedStories.sort((a, b) => b.timestamp - a.timestamp);
            
            if (publishedStories.length === 0) {
                publishedStoriesList.innerHTML = '<tr><td colspan="5" style="text-align: center;">No published stories</td></tr>';
                return;
            }
            
            publishedStories.forEach(story => {
                const row = document.createElement('tr');
                row.dataset.id = story.id;
                
                row.innerHTML = `
                    <td>${story.title}</td>
                    <td>${story.author || 'Anonymous'}</td>
                    <td>${new Date(story.timestamp).toLocaleDateString()}</td>
                    <td>${story.content.substring(0, 50)}...</td>
                    <td class="action-buttons">
                        <button class="btn action-btn view-published-btn">View</button>
                        <button class="btn action-btn edit-btn">Edit</button>
                        <button class="btn action-btn btn-secondary unpublish-btn">Unpublish</button>
                        <button class="btn action-btn btn-danger delete-btn">Delete</button>
                    </td>
                `;
                
                publishedStoriesList.appendChild(row);
                
                // Add event listeners to buttons
                row.querySelector('.view-published-btn').addEventListener('click', () => {
                    showStoryDetail(story.id);
                });
                
                row.querySelector('.edit-btn').addEventListener('click', () => {
                    editStory(story.id);
                });
            alert('Thank you for signing up! You can now explore the graveyard.');
            authModal.style.display = 'none';
            this.reset();
        });
        
        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            alert('You are now logged in!');
            authModal.style.display = 'none';
            this.reset();
        });
        
        document.getElementById('grave-form').addEventListener('submit', function(e) {
            e.preventDefault();
            alert('Thank you for your submission! Our team will review your project and contact you shortly.');
            listGraveModal.style.display = 'none';
            this.reset();
        });
        
        document.getElementById('inquire-form').addEventListener('submit', function(e) {
            e.preventDefault();
            alert('Your inquiry has been sent! We will connect you with the project owner shortly.');
            inquireModal.style.display = 'none';
            this.reset();
        });
        
        // Filter buttons
        const filterButtons = document.querySelectorAll('.filter-button');
        filterButtons.forEach(button => {
            button.addEventListener('click', function() {
                filterButtons.forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');

                row.querySelector('.unpublish-btn').addEventListener('click', () => {
                    showConfirmation('unpublish', story.id, `Unpublish "${story.title}"?`);
                });
                // Simple filter functionality
                const filterValue = this.textContent.toLowerCase();
                const cards = document.querySelectorAll('.grave-card');

                row.querySelector('.delete-btn').addEventListener('click', () => {
                    showConfirmation('delete', story.id, `Permanently delete "${story.title}"?`);
                cards.forEach(card => {
                    const price = card.querySelector('.grave-price').textContent;
                    const priceValue = parseInt(price.replace('$', '').replace(',', ''));
                    
                    if (filterValue === 'all') {
                        card.style.display = 'block';
                    } else if (filterValue === 'under $1k' && priceValue < 1000) {
                        card.style.display = 'block';
                    } else if (filterValue === 'with codebase') {
                        const assets = card.querySelector('.grave-card-assets').textContent;
                        if (assets.includes('Codebase')) {
                            card.style.display = 'block';
                        } else {
                            card.style.display = 'none';
                        }
                    } else {
                        card.style.display = 'none';
                    }
                });
            });
        }

        // Edit story (admin)
        function editStory(storyId) {
            const story = stories.find(s => s.id === storyId);
            if (!story) return;
            
            document.getElementById('edit-story-id').value = story.id;
            document.getElementById('edit-story-title').value = story.title;
            document.getElementById('edit-story-content').value = story.content;
            document.getElementById('edit-author-name').value = story.author || '';
            document.getElementById('edit-author-email').value = story.email || '';
            document.getElementById('edit-story-date').value = story.date || '';
            document.getElementById('edit-story-location').value = story.location || '';
            document.getElementById('edit-story-status').value = story.status;
            
            openModal(adminEditModal);
        }

        // Save edited story
        function saveEditedStory(e) {
            e.preventDefault();
            
            const storyId = document.getElementById('edit-story-id').value;
            const story = stories.find(s => s.id === storyId);
            if (!story) return;
            
            story.title = document.getElementById('edit-story-title').value;
            story.content = document.getElementById('edit-story-content').value;
            story.author = document.getElementById('edit-author-name').value;
            story.email = document.getElementById('edit-author-email').value;
            story.date = document.getElementById('edit-story-date').value;
            story.location = document.getElementById('edit-story-location').value;
            story.status = document.getElementById('edit-story-status').value;
            
            saveStories();
            
            // Refresh views
            if (story.status === 'published') {
                renderStories();
                renderPublishedStories();
                renderMapMarkers();
            } else {
                renderPendingStories();
            }
            
            closeModal(adminEditModal);
        }

        // Show confirmation dialog
        function showConfirmation(action, storyId, message) {
            currentAction = action;
            currentStoryId = storyId;
            
            document.getElementById('confirmation-title').textContent = `Confirm ${action}`;
            document.getElementById('confirmation-message').textContent = message;
            
            openModal(confirmationModal);
        }

        // Handle confirmed action
        function confirmAction() {
            const story = stories.find(s => s.id === currentStoryId);
            if (!story) return;
            
            switch (currentAction) {
                case 'approve':
                    story.status = 'published';
                    story.timestamp = Date.now();
                    break;
                case 'reject':
                    story.status = 'rejected';
                    break;
                case 'unpublish':
                    story.status = 'pending';
                    break;
                case 'delete':
                    stories = stories.filter(s => s.id !== currentStoryId);
                    break;
            }
            
            saveStories();
            
            // Refresh views
            renderStories();
            renderPendingStories();
            renderPublishedStories();
            renderMapMarkers();
            
            closeModal(confirmationModal);
        }

        // Save stories to localStorage
        function saveStories() {
            localStorage.setItem('cupertinoChroniclesStories', JSON.stringify(stories));
        }

        // Generate a unique ID
        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }

        // Modal functions
        function openModal(modal) {
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeModal(modal) {
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function closeAllModals() {
            document.querySelectorAll('.modal').forEach(modal => {
                closeModal(modal);
            });
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
        });
    </script>
</body>
</html>
